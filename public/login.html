<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Burger</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header>
    <h1>Login</h1>
  </header>
  <button data-target="modal1" class="btn modal-trigger modal-btn">Sign Up</button>
  <div id="modal1" class="modal">
    <div class="modal-content">
      <form class="sign-up">
        <div class="input-field">
          <input type="text" id="username" required/>
          <label for="burger">username</label>
        </div>
        <div class="input-field">
          <input type="text" id="password" required/>
          <label for="topping1">password</label>
        </div>
        <button class="waves-effect waves-light btn red lighten-2" 
                type="submit"
                id="signup-submit-btn"
        >Sign-Up</button>
      </form>
    </div>
  </div>

  <button data-target="modal2" class="btn modal-trigger modal-btn">Log In</button>
  <div id="modal2" class="modal">
    <div class="modal-content">
      <form class="sign-up">
        <div class="input-field">
          <input type="text" id="username-log" required/>
          <label for="burger">username</label>
        </div>
        <div class="input-field">
          <input type="text" id="password-log" required/>
          <label for="topping1">password</label>
        </div>
        <button class="waves-effect waves-light btn red lighten-2" 
                type="submit"
                id="login-submit-btn"
        >Login</button>
      </form>
    </div>
  </div>
  <!-- Import jQuery before materialize.js -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>  
  <script>
    $(document).ready(function(){
      $('.modal').modal();
      // sign up script
      $('#signup-submit-btn').on('click', function(e) {
        e.preventDefault()
        $.post('/api/users', {
          username: $('#username').val().trim(),
          password: $('#password').val().trim()
        })
        .then(res => {
          console.log(res)
        })
        .catch(err => {
          console.log(err)
        })
      })
      // login script
      $('#login-submit-btn').on('click', function(e) {
        e.preventDefault()
        $.post('/api/login', {
          username: $('#username-log').val().trim(),
          password: $('#password-log').val().trim()
        })
        .then(res => {
          console.log(res)
        })
        .catch(err => {
          console.log(err)
        })
      })
    });
  </script>
</body>

</html>
